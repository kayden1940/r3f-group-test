{"version":3,"sources":["App.js","index.js"],"names":["useStore","create","set","target","setTarget","Box","forwardRef","props","ref","scene","useThree","useEffect","console","log","state","useState","hovered","setHovered","useCursor","onClick","e","object","onPointerOver","onPointerOut","attach","parent","self","add","remove","Group","App","Comps","setComps","groupRef","useRef","boxRefs","mode","useControls","value","options","addBox","button","get","boxRef","createRef","current","push","prev","attachAllBoxToGroup","forEach","detachAllBoxFromGroup","dpr","onPointerMissed","TransformControls","OrbitControls","makeDefault","ReactDOM","render","document","getElementById"],"mappings":"iRAMMA,EAAWC,KAAO,SAACC,GAAD,MAAU,CAAEC,OAAQ,KAAMC,UAAW,SAACD,GAAD,OAAYD,EAAI,CAAEC,gBAEzEE,EAAMC,sBAAW,SAACC,EAAOC,GAC7B,IAAQC,EAAUC,cAAVD,MACRE,qBAAU,WACRC,QAAQC,IAAI,QAASJ,KACpB,CAACA,IAEJ,IAAML,EAAYJ,GAAS,SAACc,GAAD,OAAWA,EAAMV,aAC5C,EAA8BW,oBAAS,GAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KAEA,OADAC,YAAUF,GAER,+CACER,IAAKA,GACDD,GAFN,IAGEY,QAAS,SAACC,GAAD,OAAOhB,EAAUgB,EAAEC,SAC5BC,cAAe,kBAAML,GAAW,IAChCM,aAAc,kBAAMN,GAAW,IAC/BO,OAAQ,SAACC,EAAQC,GAGf,OAFAD,EAAOE,IAAID,GACXd,QAAQC,IAAI,eAAgBY,EAAQC,GAC7B,kBAAMD,EAAOG,OAAOF,KAT/B,UAWE,gCACA,8CAKAG,EAAQvB,sBAAW,SAACC,EAAOC,GAC/B,OAAO,uBAAOA,IAAKA,OAGN,SAASsB,IACtB,MAA8B9B,IAAtBG,EAAR,EAAQA,OAAQC,EAAhB,EAAgBA,UAChB,EAA0BW,mBAAS,IAAnC,mBAAOgB,EAAP,KAAcC,EAAd,KACMC,EAAWC,mBACXC,EAAUD,iBAAO,IAEvBvB,qBAAU,WACRqB,EAAS,CAAC,cAACH,EAAD,CAAOrB,IAAKyB,GAAc,aACnC,IAEHtB,qBAAU,WACRC,QAAQC,IAAI,QAASkB,KACpB,CAACA,IAMJ,IAAQK,EAASC,YAAY,CAC3BD,KAAM,CAAEE,MAAO,YAAaC,QAAS,CAAC,YAAa,SAAU,UAC7DC,OAAQC,aAAO,SAACC,GACd,IAAMC,EAASC,sBACfT,EAAQU,QAAQC,KAAKH,GACrB/B,QAAQC,IAAI,kBAAmBsB,EAAQU,SACvCb,GAAS,SAACe,GAAD,4BAAcA,GAAd,CAAoB,cAAC1C,EAAD,CAAKG,IAAKmC,YAEzCK,oBAAqBP,aAAO,SAACC,GAC3BP,EAAQU,QAAQI,SAAQ,SAACN,GACvBV,EAASY,QAAQrB,OAAOmB,SAG5BO,sBAAuBT,aAAO,SAACC,SAbzBN,KAiBR,OACE,eAAC,IAAD,CAAQe,IAAK,CAAC,EAAG,GAAIC,gBAAiB,kBAAMhD,EAAU,OAAtD,UACG2B,EACA5B,GAAU,cAACkD,EAAA,EAAD,CAAmBhC,OAAQlB,EAAQiC,KAAMA,IACpD,cAACkB,EAAA,EAAD,CAAeC,aAAW,OC1EhCC,IAASC,OAAO,cAAC3B,EAAD,IAAS4B,SAASC,eAAe,W","file":"static/js/main.12e3a5a7.chunk.js","sourcesContent":["import { useState, useEffect, useRef, forwardRef, createRef } from 'react'\nimport { Canvas, useThree } from '@react-three/fiber'\nimport { OrbitControls, TransformControls, useCursor } from '@react-three/drei'\nimport { useControls, button } from 'leva'\nimport create from 'zustand'\n\nconst useStore = create((set) => ({ target: null, setTarget: (target) => set({ target }) }))\n\nconst Box = forwardRef((props, ref) => {\n  const { scene } = useThree()\n  useEffect(() => {\n    console.log('scene', scene)\n  }, [scene])\n\n  const setTarget = useStore((state) => state.setTarget)\n  const [hovered, setHovered] = useState(false)\n  useCursor(hovered)\n  return (\n    <mesh\n      ref={ref}\n      {...props}\n      onClick={(e) => setTarget(e.object)}\n      onPointerOver={() => setHovered(true)}\n      onPointerOut={() => setHovered(false)}\n      attach={(parent, self) => {\n        parent.add(self)\n        console.log('parent, self', parent, self)\n        return () => parent.remove(self)\n      }}>\n      <boxGeometry />\n      <meshNormalMaterial />\n    </mesh>\n  )\n})\n\nconst Group = forwardRef((props, ref) => {\n  return <group ref={ref}></group>\n})\n\nexport default function App() {\n  const { target, setTarget } = useStore()\n  const [Comps, setComps] = useState([])\n  const groupRef = useRef()\n  const boxRefs = useRef([])\n\n  useEffect(() => {\n    setComps([<Group ref={groupRef} key=\"Group\" />])\n  }, [])\n\n  useEffect(() => {\n    console.log('Comps', Comps)\n  }, [Comps])\n\n  // useEffect(() => {\n  //   console.log('boxRefs', boxRefs.current)\n  // }, [boxRefs.current])\n\n  const { mode } = useControls({\n    mode: { value: 'translate', options: ['translate', 'rotate', 'scale'] },\n    addBox: button((get) => {\n      const boxRef = createRef()\n      boxRefs.current.push(boxRef)\n      console.log('boxRefs.current', boxRefs.current)\n      setComps((prev) => [...prev, <Box ref={boxRef} />])\n    }),\n    attachAllBoxToGroup: button((get) => {\n      boxRefs.current.forEach((boxRef) => {\n        groupRef.current.attach(boxRef)\n      })\n    }),\n    detachAllBoxFromGroup: button((get) => {\n    })\n  })\n\n  return (\n    <Canvas dpr={[1, 2]} onPointerMissed={() => setTarget(null)}>\n      {Comps}\n      {target && <TransformControls object={target} mode={mode} />}\n      <OrbitControls makeDefault />\n    </Canvas>\n  )\n}\n","import ReactDOM from 'react-dom'\nimport './styles.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}